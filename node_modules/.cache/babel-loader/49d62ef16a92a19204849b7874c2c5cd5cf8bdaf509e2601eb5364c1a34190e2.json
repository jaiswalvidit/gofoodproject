{"ast":null,"code":"import _defineProperty from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var navigate=useNavigate();var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);setError('');_context.prev=3;_context.next=6;return fetch('http://localhost:5000/api/auth/loginuser',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:credentials.name,email:credentials.email,password:credentials.password})});case 6:response=_context.sent;_context.next=9;return response.json();case 9:json=_context.sent;console.log(json);if(!json.success){setError('Invalid credentials');}else{localStorage.setItem('userEmail',credentials.email);localStorage.setItem('authToken',json.authToken);localStorage.setItem('userdetails',JSON.stringify(json));console.log(JSON.stringify(json));navigate('/');}_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);console.error('An error occurred:',_context.t0);setError('An error occurred while logging in');case 18:_context.prev=18;setLoading(false);return _context.finish(18);case 21:case\"end\":return _context.stop();}},_callee,null,[[3,14,18,21]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var onChange=function onChange(event){setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},event.target.name,event.target.value)));};return/*#__PURE__*/_jsx(\"div\",{className:\" py-5 \",style:{background:\"rgba(255, 255, 0, 0.1)\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"form\",{className:\"bg-light p-4  rounded shadow\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-primary text-center\",children:\"LOGIN FORM\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"EMAIL \"}),\" \",/*#__PURE__*/_jsx(\"sup\",{className:\"text-danger\",children:\"*\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-label\":\"Email\",\"aria-labelledby\":\"emailLabel\",name:\"email\",value:credentials.email,onChange:onChange,required:true}),/*#__PURE__*/_jsx(\"div\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"form-label\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"PASSWORD \"}),\" \",/*#__PURE__*/_jsx(\"sup\",{className:\"text-danger\",children:\"*\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"exampleInputPassword1\",\"aria-label\":\"Password\",\"aria-labelledby\":\"passwordLabel\",name:\"password\",value:credentials.password,onChange:onChange,required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 col-6 mx-auto\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",disabled:loading,children:loading?'Logging in...':'Submit'}),/*#__PURE__*/_jsx(Link,{to:\"/auth/createuser\",className:\"btn btn-link\",children:\"New User\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\"})]})});}","map":{"version":3,"names":["React","useState","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Login","navigate","_useState","email","password","_useState2","_slicedToArray","credentials","setCredentials","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","json","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","name","sent","console","log","success","localStorage","setItem","authToken","t0","finish","stop","_x","apply","arguments","onChange","event","_objectSpread","_defineProperty","target","value","className","style","background","children","onSubmit","htmlFor","type","id","required","disabled","to"],"sources":["D:/food_app/mernapp/src/screens/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\n\r\nexport default function Login() {\r\n  const navigate = useNavigate();\r\n  const [credentials, setCredentials] = useState({ email: '', password: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/auth/loginuser', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({name:credentials.name, email: credentials.email, password: credentials.password }),\r\n      });\r\n\r\n      const json = await response.json();\r\n      console.log(json);\r\n\r\n      if (!json.success) {\r\n        setError('Invalid credentials');\r\n      } else {\r\n        localStorage.setItem('userEmail', credentials.email);\r\n        localStorage.setItem('authToken', json.authToken);\r\n        localStorage.setItem('userdetails',JSON.stringify(json));\r\n       console.log(JSON.stringify(json));\r\n\r\n        navigate('/');\r\n      }\r\n    } catch (err) {\r\n      console.error('An error occurred:', err);\r\n      setError('An error occurred while logging in');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    setCredentials({ ...credentials, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\" py-5 \" style={{background: \"rgba(255, 255, 0, 0.1)\"}}>\r\n      \r\n      <div className=\"container\">\r\n        <form className=\"bg-light p-4  rounded shadow\" onSubmit={handleSubmit}>\r\n          <fieldset>\r\n            <legend>\r\n              <h1 className=\"text-primary text-center\">LOGIN FORM</h1>\r\n            </legend>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">\r\n                <h4>\r\n                  <strong>EMAIL </strong> <sup className=\"text-danger\">*</sup>\r\n                </h4>\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputEmail1\"\r\n                aria-label=\"Email\"\r\n                aria-labelledby=\"emailLabel\"\r\n                name=\"email\"\r\n                value={credentials.email}\r\n                onChange={onChange}\r\n                required\r\n              />\r\n              <div id=\"emailHelp\" className=\"form-text text-muted\">\r\n                We'll never share your email with anyone else.\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n                <h4>\r\n                  <strong>PASSWORD </strong> <sup className=\"text-danger\">*</sup>\r\n                </h4>\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n                aria-label=\"Password\"\r\n                aria-labelledby=\"passwordLabel\"\r\n                name=\"password\"\r\n                value={credentials.password}\r\n                onChange={onChange}\r\n                required\r\n              />\r\n            </div>\r\n            {error && <p className=\"text-danger\">{error}</p>}\r\n            <div className=\"d-grid gap-2 col-6 mx-auto\">\r\n              <button className=\"btn btn-primary\" type=\"submit\" disabled={loading}>\r\n                {loading ? 'Logging in...' : 'Submit'}\r\n              </button>\r\n              <Link to=\"/auth/createuser\" className=\"btn btn-link\">\r\n                New User\r\n              </Link>\r\n            </div>\r\n          </fieldset>\r\n        </form>\r\n\r\n        <div className=\"mt-3\"></div>\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}