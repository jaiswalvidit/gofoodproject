{"ast":null,"code":"import _regeneratorRuntime from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{IMAGE_URL}from'../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function MyOrder(){var _useState=useState({email:'',products:[]}),_useState2=_slicedToArray(_useState,2),orderData=_useState2[0],setOrderData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchMyOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userEmail,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;userEmail=localStorage.getItem('userEmail');_context.next=4;return fetch(\"http://localhost:5000/api/myOrderData?email=\".concat(userEmail),{method:'GET',headers:{'Content-Type':'application/json'}});case 4:response=_context.sent;if(!response.ok){_context.next=12;break;}_context.next=8;return response.json();case 8:data=_context.sent;setOrderData(data.orderData[0]||{email:'',products:[]});_context.next=14;break;case 12:console.error('Fetch failed with status:',response.status);setError('Failed to fetch data');case 14:_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.error('Error:',_context.t0);setError('An unexpected error occurred');case 20:_context.prev=20;setLoading(false);return _context.finish(20);case 23:case\"end\":return _context.stop();}},_callee,null,[[0,16,20,23]]);}));return function fetchMyOrder(){return _ref.apply(this,arguments);};}();fetchMyOrder();},[]);var cardStyle={backgroundColor:'#343a40',color:'white',padding:'1rem',borderRadius:'10px',margin:'2px'};var productCardStyle={backgroundColor:'#ffc107',padding:'1rem',display:'flex',justifyContent:'space-between'};var dateStyle={fontSize:'1rem',color:'rgba(255, 255, 255, 0.8)',textAlign:'center'};return/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(255, 255, 0, 0.1)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"container my-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(_Fragment,{children:error?/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]}):/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:orderData.products&&orderData.products.length===0?/*#__PURE__*/_jsx(\"li\",{children:\"No product added\"}):orderData.products.map(function(productGroup,index){return/*#__PURE__*/_jsx(\"li\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"m-2 p-2\",style:cardStyle,children:[productGroup[0].Order_date&&/*#__PURE__*/_jsxs(\"div\",{style:dateStyle,className:\"fs-4\",children:[\"Date: \",new Date(productGroup[0].Order_date).toLocaleDateString(),\" Time:\",' ',new Date(productGroup[0].Order_date).toLocaleTimeString()]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled m-3\",children:productGroup.slice(1).map(function(product,subIndex){return/*#__PURE__*/_jsx(\"li\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rpw\",style:productCardStyle,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-start fs-6 col-9\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-success font-weight-bold mb-0\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Name: \",product.Name]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mb-0\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Price: \\u20B9\",product.price/100,\"/-\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-dark mb-0\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Quantity: \",product.qty]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-dark mb-0\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Description: \",product.description]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end col-3 rounded \",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(IMAGE_URL).concat(product.imageId||'defaultImageId'),alt:\"Product \".concat(product.Name),style:{maxWidth:'100%',height:'auto'},className:\"img-fluid  rounded\"})})]})},subIndex);})})]})},index);})})})})})})});}","map":{"version":3,"names":["React","useEffect","useState","IMAGE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyOrder","_useState","email","products","_useState2","_slicedToArray","orderData","setOrderData","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","fetchMyOrder","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userEmail","response","data","wrap","_callee$","_context","prev","next","localStorage","getItem","fetch","concat","method","headers","sent","ok","json","console","status","t0","finish","stop","apply","arguments","cardStyle","backgroundColor","color","padding","borderRadius","margin","productCardStyle","display","justifyContent","dateStyle","fontSize","textAlign","style","background","children","className","length","map","productGroup","index","Order_date","Date","toLocaleDateString","toLocaleTimeString","slice","product","subIndex","Name","price","qty","description","src","imageId","alt","maxWidth","height"],"sources":["D:/food_app/mernapp/src/screens/MyOrders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { IMAGE_URL } from '../constants';\r\n\r\nexport default function MyOrder() {\r\n  const [orderData, setOrderData] = useState({ email: '', products: [] });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchMyOrder = async () => {\r\n      try {\r\n        const userEmail = localStorage.getItem('userEmail');\r\n\r\n        const response = await fetch(`http://localhost:5000/api/myOrderData?email=${userEmail}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setOrderData(data.orderData[0] || { email: '', products: [] });\r\n        } else {\r\n          console.error('Fetch failed with status:', response.status);\r\n          setError('Failed to fetch data');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        setError('An unexpected error occurred');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchMyOrder();\r\n  }, []);\r\n\r\n  const cardStyle = {\r\n    backgroundColor: '#343a40',\r\n    color: 'white',\r\n    padding: '1rem',\r\n    borderRadius: '10px',\r\n    margin: '2px',\r\n  };\r\n\r\n  const productCardStyle = {\r\n    backgroundColor: '#ffc107',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  };\r\n\r\n  const dateStyle = {\r\n    fontSize: '1rem',\r\n    color: 'rgba(255, 255, 255, 0.8)',\r\n    textAlign: 'center',\r\n  };\r\n\r\n  return (\r\n    <div style={{ background: 'rgba(255, 255, 0, 0.1)' }}>\r\n      <div className=\"container my-2\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            {loading ? (\r\n              <div>Loading...</div>\r\n            ) : (\r\n              <>\r\n                {error ? (\r\n                  <div>Error: {error}</div>\r\n                ) : (\r\n                  <ul className=\"list-unstyled\">\r\n                    {orderData.products && orderData.products.length === 0 ? (\r\n                      <li>No product added</li>\r\n                    ) : (\r\n                      orderData.products.map((productGroup, index) => (\r\n                        <li key={index} className=\"mb-4\">\r\n                          <div className=\"m-2 p-2\" style={cardStyle}>\r\n                            {productGroup[0].Order_date && (\r\n                              <div style={dateStyle} className=\"fs-4\">\r\n                                Date: {new Date(productGroup[0].Order_date).toLocaleDateString()} Time:{' '}\r\n                                {new Date(productGroup[0].Order_date).toLocaleTimeString()}\r\n                              </div>\r\n                            )}\r\n                            <ul className=\"list-unstyled m-3\">\r\n                              {productGroup.slice(1).map((product, subIndex) => (\r\n                                <li key={subIndex} className=\"mb-3\">\r\n                                  <div className=\"rpw\" style={productCardStyle}>\r\n                                    <div className=\"text-start fs-6 col-9\">\r\n                                      <p className=\"text-success font-weight-bold mb-0\">\r\n                                        <strong>Name: {product.Name}</strong>\r\n                                      </p>\r\n                                      <p className=\"text-danger mb-0\">\r\n                                        <strong>Price: â‚¹{product.price / 100}/-</strong>\r\n                                      </p>\r\n                                      <p className=\"text-dark mb-0\">\r\n                                        <strong>Quantity: {product.qty}</strong>\r\n                                      </p>\r\n                                      <p className=\"text-dark mb-0\">\r\n                                        <strong>Description: {product.description}</strong>\r\n                                      </p>\r\n                                    </div>\r\n                                    <div className=\"text-end col-3 rounded \">\r\n                                      <img\r\n                                        src={`${IMAGE_URL}${product.imageId || 'defaultImageId'}`}\r\n                                        alt={`Product ${product.Name}`}\r\n                                        style={{ maxWidth: '100%', height: 'auto' }}\r\n                                        className=\"img-fluid  rounded\"\r\n                                      />\r\n                                    </div>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          </div>\r\n                        </li>\r\n                      ))\r\n                    )}\r\n                  </ul>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* <Footer /> */}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"2UAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAElD,OAASC,SAAS,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzC,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAChC,IAAAC,SAAA,CAAkCT,QAAQ,CAAC,CAAEU,KAAK,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAAhEK,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAA8BhB,QAAQ,CAAC,IAAI,CAAC,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA0BpB,QAAQ,CAAC,IAAI,CAAC,CAAAqB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAjCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtBtB,SAAS,CAAC,UAAM,CACd,GAAM,CAAAyB,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAEXN,SAAS,CAAGQ,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAAJ,QAAA,CAAAE,IAAA,SAE5B,CAAAG,KAAK,gDAAAC,MAAA,CAAgDX,SAAS,EAAI,CACvFY,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,QALIZ,QAAQ,CAAAI,QAAA,CAAAS,IAAA,KAOVb,QAAQ,CAACc,EAAE,EAAAV,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,SACM,CAAAN,QAAQ,CAACe,IAAI,CAAC,CAAC,QAA5Bd,IAAI,CAAAG,QAAA,CAAAS,IAAA,CACV7B,YAAY,CAACiB,IAAI,CAAClB,SAAS,CAAC,CAAC,CAAC,EAAI,CAAEJ,KAAK,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAACwB,QAAA,CAAAE,IAAA,kBAE/DU,OAAO,CAACzB,KAAK,CAAC,2BAA2B,CAAES,QAAQ,CAACiB,MAAM,CAAC,CAC3DzB,QAAQ,CAAC,sBAAsB,CAAC,CAAC,QAAAY,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAc,EAAA,CAAAd,QAAA,aAGnCY,OAAO,CAACzB,KAAK,CAAC,QAAQ,CAAAa,QAAA,CAAAc,EAAO,CAAC,CAC9B1B,QAAQ,CAAC,8BAA8B,CAAC,CAAC,QAAAY,QAAA,CAAAC,IAAA,IAEzCjB,UAAU,CAAC,KAAK,CAAC,CAAC,OAAAgB,QAAA,CAAAe,MAAA,8BAAAf,QAAA,CAAAgB,IAAA,MAAAtB,OAAA,uBAErB,kBAxBK,CAAAL,YAAYA,CAAA,SAAAC,IAAA,CAAA2B,KAAA,MAAAC,SAAA,OAwBjB,CAED7B,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAA8B,SAAS,CAAG,CAChBC,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,MAAM,CACpBC,MAAM,CAAE,KACV,CAAC,CAED,GAAM,CAAAC,gBAAgB,CAAG,CACvBL,eAAe,CAAE,SAAS,CAC1BE,OAAO,CAAE,MAAM,CACfI,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAClB,CAAC,CAED,GAAM,CAAAC,SAAS,CAAG,CAChBC,QAAQ,CAAE,MAAM,CAChBR,KAAK,CAAE,0BAA0B,CACjCS,SAAS,CAAE,QACb,CAAC,CAED,mBACE9D,IAAA,QAAK+D,KAAK,CAAE,CAAEC,UAAU,CAAE,wBAAyB,CAAE,CAAAC,QAAA,cACnDjE,IAAA,QAAKkE,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC7BjE,IAAA,QAAKkE,SAAS,CAAC,KAAK,CAAAD,QAAA,cAClBjE,IAAA,QAAKkE,SAAS,CAAC,QAAQ,CAAAD,QAAA,CACpBlD,OAAO,cACNf,IAAA,QAAAiE,QAAA,CAAK,YAAU,CAAK,CAAC,cAErBjE,IAAA,CAAAI,SAAA,EAAA6D,QAAA,CACG9C,KAAK,cACJjB,KAAA,QAAA+D,QAAA,EAAK,SAAO,CAAC9C,KAAK,EAAM,CAAC,cAEzBnB,IAAA,OAAIkE,SAAS,CAAC,eAAe,CAAAD,QAAA,CAC1BtD,SAAS,CAACH,QAAQ,EAAIG,SAAS,CAACH,QAAQ,CAAC2D,MAAM,GAAK,CAAC,cACpDnE,IAAA,OAAAiE,QAAA,CAAI,kBAAgB,CAAI,CAAC,CAEzBtD,SAAS,CAACH,QAAQ,CAAC4D,GAAG,CAAC,SAACC,YAAY,CAAEC,KAAK,qBACzCtE,IAAA,OAAgBkE,SAAS,CAAC,MAAM,CAAAD,QAAA,cAC9B/D,KAAA,QAAKgE,SAAS,CAAC,SAAS,CAACH,KAAK,CAAEZ,SAAU,CAAAc,QAAA,EACvCI,YAAY,CAAC,CAAC,CAAC,CAACE,UAAU,eACzBrE,KAAA,QAAK6D,KAAK,CAAEH,SAAU,CAACM,SAAS,CAAC,MAAM,CAAAD,QAAA,EAAC,QAChC,CAAC,GAAI,CAAAO,IAAI,CAACH,YAAY,CAAC,CAAC,CAAC,CAACE,UAAU,CAAC,CAACE,kBAAkB,CAAC,CAAC,CAAC,QAAM,CAAC,GAAG,CAC1E,GAAI,CAAAD,IAAI,CAACH,YAAY,CAAC,CAAC,CAAC,CAACE,UAAU,CAAC,CAACG,kBAAkB,CAAC,CAAC,EACvD,CACN,cACD1E,IAAA,OAAIkE,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAC9BI,YAAY,CAACM,KAAK,CAAC,CAAC,CAAC,CAACP,GAAG,CAAC,SAACQ,OAAO,CAAEC,QAAQ,qBAC3C7E,IAAA,OAAmBkE,SAAS,CAAC,MAAM,CAAAD,QAAA,cACjC/D,KAAA,QAAKgE,SAAS,CAAC,KAAK,CAACH,KAAK,CAAEN,gBAAiB,CAAAQ,QAAA,eAC3C/D,KAAA,QAAKgE,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eACpCjE,IAAA,MAAGkE,SAAS,CAAC,oCAAoC,CAAAD,QAAA,cAC/C/D,KAAA,WAAA+D,QAAA,EAAQ,QAAM,CAACW,OAAO,CAACE,IAAI,EAAS,CAAC,CACpC,CAAC,cACJ9E,IAAA,MAAGkE,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC7B/D,KAAA,WAAA+D,QAAA,EAAQ,eAAQ,CAACW,OAAO,CAACG,KAAK,CAAG,GAAG,CAAC,IAAE,EAAQ,CAAC,CAC/C,CAAC,cACJ/E,IAAA,MAAGkE,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC3B/D,KAAA,WAAA+D,QAAA,EAAQ,YAAU,CAACW,OAAO,CAACI,GAAG,EAAS,CAAC,CACvC,CAAC,cACJhF,IAAA,MAAGkE,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC3B/D,KAAA,WAAA+D,QAAA,EAAQ,eAAa,CAACW,OAAO,CAACK,WAAW,EAAS,CAAC,CAClD,CAAC,EACD,CAAC,cACNjF,IAAA,QAAKkE,SAAS,CAAC,yBAAyB,CAAAD,QAAA,cACtCjE,IAAA,QACEkF,GAAG,IAAA5C,MAAA,CAAKxC,SAAS,EAAAwC,MAAA,CAAGsC,OAAO,CAACO,OAAO,EAAI,gBAAgB,CAAG,CAC1DC,GAAG,YAAA9C,MAAA,CAAasC,OAAO,CAACE,IAAI,CAAG,CAC/Bf,KAAK,CAAE,CAAEsB,QAAQ,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAO,CAAE,CAC5CpB,SAAS,CAAC,oBAAoB,CAC/B,CAAC,CACC,CAAC,EACH,CAAC,EAxBCW,QAyBL,CAAC,EACN,CAAC,CACA,CAAC,EACF,CAAC,EAtCCP,KAuCL,CAAC,EACN,CACF,CACC,CACL,CACD,CACH,CACE,CAAC,CACH,CAAC,CACH,CAAC,CAEH,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}