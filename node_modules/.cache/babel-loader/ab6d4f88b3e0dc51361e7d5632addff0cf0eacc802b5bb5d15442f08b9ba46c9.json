{"ast":null,"code":"import _regeneratorRuntime from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/food_app/mernapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useDispatchCart,useCart}from'./ContextReducer';import{IMAGE_URL}from'../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FoodDataCard(_ref){var foodItem=_ref.foodItem,url=_ref.url;var dispatch=useDispatchCart();var data=useCart();var fixedPrice=foodItem.price||foodItem.defaultPrice;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addedToCart=_useState4[0],setAddedToCart=_useState4[1];var finalPrice=qty*fixedPrice/100;var handleAddToCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var existingFoodIndex,existingFood,updatedQty;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(qty>0)){_context.next=14;break;}existingFoodIndex=data.findIndex(function(item){return item.id===foodItem.id;});if(!(existingFoodIndex!==-1)){_context.next=9;break;}existingFood=data[existingFoodIndex];updatedQty=existingFood.qty+qty;_context.next=7;return dispatch({type:'UPDATE',index:existingFoodIndex,qty:updatedQty});case 7:_context.next=11;break;case 9:_context.next=11;return dispatch({type:'ADD',id:foodItem.id,name:foodItem.name,price:fixedPrice,qty:qty,imageId:foodItem.imageId,description:foodItem.description});case 11:setAddedToCart(true);setQty(0);console.log(data);case 14:case\"end\":return _context.stop();}},_callee);}));return function handleAddToCart(){return _ref2.apply(this,arguments);};}();var decrementQty=function decrementQty(){if(qty>0){setQty(qty-1);}};var incrementQty=function incrementQty(){setQty(qty+1);};useEffect(function(){var timer;if(addedToCart){timer=setTimeout(function(){setAddedToCart(false);},400);}return function(){clearTimeout(timer);};},[addedToCart]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-2 bg-light text-dark rounded-20\",style:{maxWidth:\"400px\",borderRadius:\"10px\",boxShadow:\"2px 4px 2px rgba(0, 0, 0, 0.6)\",transition:\"transform 0.2s\"},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.transform=\"scale(1.05)\";},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.transform=\"scale(1)\";},children:[/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid rounded\",src:\"\".concat(IMAGE_URL).concat(foodItem.imageId),alt:\"Food\",style:{objectFit:'contain',width:\"100%\",maxHeight:\"200px\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-7\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title text-secondary fs-5\",children:foodItem.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-primary fs-6\",children:[\"Rs \",fixedPrice/100]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-control text-success fs-6\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm px-1\",onClick:decrementQty,style:{width:'30px'},children:\" - \"}),/*#__PURE__*/_jsx(\"span\",{className:\"quantity-display fs-6 px-2 m-1\",children:qty}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm\",onClick:incrementQty,style:{width:'30px'},children:\" + \"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-success fs-6\",children:[\"Total : Rs. \",finalPrice.toFixed(2)]})]})]}),addedToCart?/*#__PURE__*/_jsx(\"span\",{className:\"alert alert-success\",role:\"alert\",children:\"Added to Cart!\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleAddToCart,children:\"Add to Cart\"})]})]});}export default FoodDataCard;","map":{"version":3,"names":["React","useState","useEffect","useDispatchCart","useCart","IMAGE_URL","jsx","_jsx","jsxs","_jsxs","FoodDataCard","_ref","foodItem","url","dispatch","data","fixedPrice","price","defaultPrice","_useState","_useState2","_slicedToArray","qty","setQty","_useState3","_useState4","addedToCart","setAddedToCart","finalPrice","handleAddToCart","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","existingFoodIndex","existingFood","updatedQty","wrap","_callee$","_context","prev","next","findIndex","item","id","type","index","name","imageId","description","console","log","stop","apply","arguments","decrementQty","incrementQty","timer","setTimeout","clearTimeout","className","style","maxWidth","borderRadius","boxShadow","transition","onMouseEnter","e","currentTarget","transform","onMouseLeave","children","src","concat","alt","objectFit","width","maxHeight","onClick","toFixed","role"],"sources":["D:/food_app/mernapp/src/components/FoodDataCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatchCart, useCart } from './ContextReducer';\r\nimport { IMAGE_URL } from '../constants';\r\n\r\nfunction FoodDataCard({ foodItem, url }) {\r\n  const dispatch = useDispatchCart();\r\n  const data = useCart();\r\n\r\n  const fixedPrice = foodItem.price || foodItem.defaultPrice;\r\n  const [qty, setQty] = useState(0);\r\n  const [addedToCart, setAddedToCart] = useState(false);\r\n\r\n  const finalPrice = (qty * fixedPrice) / 100;\r\n\r\n  const handleAddToCart = async () => {\r\n    if (qty > 0) {\r\n      const existingFoodIndex = data.findIndex((item) => item.id === foodItem.id);\r\n\r\n      if (existingFoodIndex !== -1) {\r\n        const existingFood = data[existingFoodIndex];\r\n        const updatedQty = existingFood.qty + qty;\r\n        await dispatch({ type: 'UPDATE', index: existingFoodIndex, qty: updatedQty });\r\n      } else {\r\n        await dispatch({ type: 'ADD', id: foodItem.id, name: foodItem.name, price: fixedPrice, qty: qty, imageId: foodItem.imageId, description: foodItem.description });\r\n      }\r\n\r\n      setAddedToCart(true);\r\n      setQty(0);\r\n\r\n      console.log(data);\r\n    }\r\n  };\r\n\r\n  const decrementQty = () => {\r\n    if (qty > 0) {\r\n      setQty(qty - 1);\r\n    }\r\n  };\r\n\r\n  const incrementQty = () => {\r\n    setQty(qty + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (addedToCart) {\r\n      timer = setTimeout(() => {\r\n        setAddedToCart(false);\r\n      }, 400);\r\n    }\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [addedToCart]);\r\n\r\n  return (\r\n    <div className=\"card m-2 bg-light text-dark rounded-20\" style={{ maxWidth: \"400px\", borderRadius: \"10px\", boxShadow: \"2px 4px 2px rgba(0, 0, 0, 0.6)\", transition: \"transform 0.2s\" }}\r\n      onMouseEnter={(e) => { e.currentTarget.style.transform = \"scale(1.05)\"; }}\r\n      onMouseLeave={(e) => { e.currentTarget.style.transform = \"scale(1)\"; }}\r\n    >\r\n      <img className='img-fluid rounded' src={`${IMAGE_URL}${foodItem.imageId}`} alt='Food' style={{ objectFit: 'contain', width: \"100%\", maxHeight: \"200px\" }} />\r\n      <div className='card-body text-center'>\r\n        <div className='row'>\r\n          <div className='col-md-7'>\r\n            <h5 className='card-title text-secondary fs-5'>{foodItem.name}</h5>\r\n            <p className='card-text text-primary fs-6'>Rs {fixedPrice / 100}</p>\r\n          </div>\r\n          <div className='col-md-5'>\r\n            <div className='quantity-control text-success fs-6'>\r\n              <button className='btn btn-success btn-sm px-1' onClick={decrementQty} style={{ width: '30px' }}> - </button>\r\n              <span className='quantity-display fs-6 px-2 m-1'>{qty}</span>\r\n              <button className='btn btn-success btn-sm' onClick={incrementQty} style={{ width: '30px' }}> + </button>\r\n            </div>\r\n            <p className='mt-2 text-success fs-6'>Total : Rs. {finalPrice.toFixed(2)}</p>\r\n          </div>\r\n        </div>\r\n        {addedToCart ? (\r\n          <span className=\"alert alert-success\" role=\"alert\">\r\n            Added to Cart!\r\n          </span>\r\n        ) : (\r\n          <button className='btn btn-primary' onClick={handleAddToCart}>\r\n            Add to Cart\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FoodDataCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}