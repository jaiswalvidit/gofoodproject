[{"D:\\food_app\\mernapp\\src\\index.js":"1","D:\\food_app\\mernapp\\src\\App.js":"2","D:\\food_app\\mernapp\\src\\components\\Profile.js":"3","D:\\food_app\\mernapp\\src\\screens\\MyOrders.js":"4","D:\\food_app\\mernapp\\src\\components\\ContextReducer.js":"5","D:\\food_app\\mernapp\\src\\components\\Success.js":"6","D:\\food_app\\mernapp\\src\\components\\Cancel.js":"7","D:\\food_app\\mernapp\\src\\components\\RestaurantPage.js":"8","D:\\food_app\\mernapp\\src\\components\\Navbar.js":"9","D:\\food_app\\mernapp\\src\\components\\Contact.js":"10","D:\\food_app\\mernapp\\src\\components\\about.js":"11","D:\\food_app\\mernapp\\src\\components\\Footer.js":"12","D:\\food_app\\mernapp\\src\\components\\Body.js":"13","D:\\food_app\\mernapp\\src\\screens\\Login.js":"14","D:\\food_app\\mernapp\\src\\screens\\Home.js":"15","D:\\food_app\\mernapp\\src\\screens\\Signup.js":"16","D:\\food_app\\mernapp\\src\\constants.js":"17","D:\\food_app\\mernapp\\src\\RestaurantData.js":"18","D:\\food_app\\mernapp\\src\\components\\FoodDataCard.js":"19","D:\\food_app\\mernapp\\src\\screens\\Cart.js":"20","D:\\food_app\\mernapp\\src\\components\\Shimmer.js":"21","D:\\food_app\\mernapp\\src\\components\\restaurantCard.js":"22","D:\\food_app\\mernapp\\src\\components\\EditAddress.js":"23","D:\\food_app\\mernapp\\src\\screens\\Restaurant.js":"24","D:\\food_app\\mernapp\\src\\components\\Display.js":"25","D:\\food_app\\mernapp\\src\\components\\addItem.js":"26","D:\\food_app\\mernapp\\src\\screens\\RestaurantDetail.js":"27","D:\\food_app\\mernapp\\src\\components\\RestaurantCard.js":"28","D:\\food_app\\mernapp\\src\\components\\Error.js":"29"},{"size":251,"mtime":1695557095545,"results":"30","hashOfConfig":"31"},{"size":2027,"mtime":1702723639759,"results":"32","hashOfConfig":"31"},{"size":6843,"mtime":1702645919949,"results":"33","hashOfConfig":"31"},{"size":5100,"mtime":1702722024717,"results":"34","hashOfConfig":"31"},{"size":1595,"mtime":1702673924662,"results":"35","hashOfConfig":"31"},{"size":549,"mtime":1701539297845,"results":"36","hashOfConfig":"31"},{"size":497,"mtime":1696918981277,"results":"37","hashOfConfig":"31"},{"size":6198,"mtime":1702637922033,"results":"38","hashOfConfig":"31"},{"size":9133,"mtime":1702723682731,"results":"39","hashOfConfig":"31"},{"size":1562,"mtime":1697366211671,"results":"40","hashOfConfig":"31"},{"size":1530,"mtime":1702713142964,"results":"41","hashOfConfig":"31"},{"size":1208,"mtime":1700761117825,"results":"42","hashOfConfig":"31"},{"size":4271,"mtime":1702626138705,"results":"43","hashOfConfig":"31"},{"size":3893,"mtime":1702826662548,"results":"44","hashOfConfig":"31"},{"size":5931,"mtime":1700828331818,"results":"45","hashOfConfig":"31"},{"size":4263,"mtime":1702826654779,"results":"46","hashOfConfig":"31"},{"size":391,"mtime":1696164467681,"results":"47","hashOfConfig":"31"},{"size":183506,"mtime":1698690698221,"results":"48","hashOfConfig":"31"},{"size":3228,"mtime":1702806678694,"results":"49","hashOfConfig":"31"},{"size":3873,"mtime":1702717580426,"results":"50","hashOfConfig":"31"},{"size":327,"mtime":1701539300079,"results":"51","hashOfConfig":"31"},{"size":2384,"mtime":1702626637616,"results":"52","hashOfConfig":"31"},{"size":6522,"mtime":1702638733046,"results":"53","hashOfConfig":"31"},{"size":5046,"mtime":1702827510372,"results":"54","hashOfConfig":"31"},{"size":1998,"mtime":1702827940870,"results":"55","hashOfConfig":"31"},{"size":7523,"mtime":1702827873665,"results":"56","hashOfConfig":"31"},{"size":2035,"mtime":1702827377886,"results":"57","hashOfConfig":"31"},{"size":2416,"mtime":1702818541543,"results":"58","hashOfConfig":"31"},{"size":132,"mtime":1702722633529,"results":"59","hashOfConfig":"31"},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},"1w7smkr",{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","suppressedMessages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"70","messages":"71","suppressedMessages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","suppressedMessages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"76","messages":"77","suppressedMessages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"79","messages":"80","suppressedMessages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"82","messages":"83","suppressedMessages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","suppressedMessages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"91","messages":"92","suppressedMessages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"100","messages":"101","suppressedMessages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","suppressedMessages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"106","messages":"107","suppressedMessages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","suppressedMessages":"111","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"112","messages":"113","suppressedMessages":"114","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"115","messages":"116","suppressedMessages":"117","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"118","messages":"119","suppressedMessages":"120","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"121","messages":"122","suppressedMessages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"124","messages":"125","suppressedMessages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"127"},{"filePath":"128","messages":"129","suppressedMessages":"130","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"131","usedDeprecatedRules":"63"},{"filePath":"132","messages":"133","suppressedMessages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","suppressedMessages":"137","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"138","messages":"139","suppressedMessages":"140","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"141","messages":"142","suppressedMessages":"143","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"144","messages":"145","suppressedMessages":"146","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"147","messages":"148","suppressedMessages":"149","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\food_app\\mernapp\\src\\index.js",[],[],["150"],"D:\\food_app\\mernapp\\src\\App.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Profile.js",[],[],"D:\\food_app\\mernapp\\src\\screens\\MyOrders.js",[],[],"D:\\food_app\\mernapp\\src\\components\\ContextReducer.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Success.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Cancel.js",[],[],"D:\\food_app\\mernapp\\src\\components\\RestaurantPage.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Navbar.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Contact.js",[],[],"D:\\food_app\\mernapp\\src\\components\\about.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Footer.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Body.js",[],[],"D:\\food_app\\mernapp\\src\\screens\\Login.js",[],[],"D:\\food_app\\mernapp\\src\\screens\\Home.js",[],[],"D:\\food_app\\mernapp\\src\\screens\\Signup.js",[],[],"D:\\food_app\\mernapp\\src\\constants.js",[],[],"D:\\food_app\\mernapp\\src\\RestaurantData.js",[],[],"D:\\food_app\\mernapp\\src\\components\\FoodDataCard.js",[],[],"D:\\food_app\\mernapp\\src\\screens\\Cart.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Shimmer.js",[],[],"D:\\food_app\\mernapp\\src\\components\\restaurantCard.js",[],[],["151"],"D:\\food_app\\mernapp\\src\\components\\EditAddress.js",["152"],[],"import React, { useState, useEffect } from \"react\";\r\n// const API_URLS = {\r\n  // USER_DATA: \"/api/userdata\",\r\n// };\r\n\r\nexport default function EditAddress() {\r\n  const [userData, setUserData] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [updatedUser, setUpdatedUser] = useState({});\r\n  const [addressForm, setAddressForm] = useState(\"\");\r\n  const [addresses, setAddresses] = useState([]);\r\n  const [editAddressIndex, setEditAddressIndex] = useState(null);\r\n  const [isAddingAddress, setIsAddingAddress] = useState(false);\r\n  const [updatedLocation, setUpdatedLocation] = useState([]);\r\n  const useremail = localStorage.getItem(\"userEmail\");\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const response = await fetch('http://localhost:8001/api/userdata', {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n      \r\n        if (response.ok) {\r\n          const users = await response.json();\r\n          const filteredUser = users.find((user) => user.email === useremail);\r\n\r\n          if (filteredUser) {\r\n            setUserData(filteredUser);\r\n            setUpdatedUser(filteredUser);\r\n            setAddresses(filteredUser.location || []);\r\n          } else {\r\n            console.error(\"User with email not found\");\r\n          }\r\n        } else {\r\n          console.error(\"Failed to fetch user data\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching user data:\", error);\r\n      }\r\n    }\r\n\r\n    fetchData();\r\n  }, [useremail]);\r\n\r\n  const handleSaveClick = async () => {\r\n    try {\r\n      // Apply the changes to the updatedLocation state\r\n      const updatedUserWithLocation = {\r\n        ...updatedUser,\r\n        location: updatedLocation,\r\n      };\r\n      console.log(updatedLocation);\r\n\r\n      // Update the user data in the database\r\n      const response = await fetch('http://localhost:8001/api/userdata', {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(updatedUserWithLocation),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const updatedUserData = await response.json();\r\n        setUserData(updatedUserData);\r\n        setIsEditing(false);\r\n      } else {\r\n        console.error(\"Failed to update user data\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating user data:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddressChange = ({ target: { name, value } }) => {\r\n    setAddressForm(value);\r\n  };\r\n\r\n  const handleAddressSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    let newAddress = addressForm; // Set newAddress to the value from addressForm\r\n\r\n    if (editAddressIndex !== null) {\r\n      // Edit address\r\n      const newAddresses = [...addresses];\r\n      newAddresses[editAddressIndex] = newAddress;\r\n      setAddresses(newAddresses);\r\n\r\n      // Update the updated location for saving\r\n      setUpdatedLocation(newAddresses);\r\n    } else {\r\n      // Add new address\r\n      const newLocationArray = [addressForm];\r\n      setAddresses([...addresses, newLocationArray]);\r\n\r\n      // Update the updated location for saving\r\n      setUpdatedLocation([...addresses, ...newLocationArray]);\r\n    }\r\n\r\n    setAddressForm(\"\");\r\n    setEditAddressIndex(null);\r\n    setIsAddingAddress(false);\r\n  };\r\n\r\n  const toggleAddAddress = () => {\r\n    setIsAddingAddress(!isAddingAddress);\r\n    setAddressForm(\"\");\r\n    setEditAddressIndex(null);\r\n  };\r\n\r\n  const editAddress = async (index) => {\r\n    // Edit address - Set the form values and open the form\r\n    setAddressForm(addresses[index]);\r\n\r\n    setEditAddressIndex(index);\r\n    setIsEditing(true); // Set isEditing to true when editing\r\n    setIsAddingAddress(true);\r\n  };\r\n\r\n  const deleteAddress = async (index) => {\r\n    // Delete address\r\n    const newAddresses = [...addresses];\r\n    newAddresses.splice(index, 1);\r\n    setAddresses(newAddresses);\r\n\r\n    // Update the updated location for saving\r\n    setUpdatedLocation(newAddresses);\r\n  };\r\n\r\n  const renderAddressForm = () => {\r\n    if (isAddingAddress || isEditing) {\r\n      // Show the form when adding or editing\r\n      return (\r\n        <form onSubmit={handleAddressSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"location\">Location:</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"location\"\r\n              name=\"location\"\r\n              value={addressForm}\r\n              onChange={handleAddressChange}\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary\">\r\n            {editAddressIndex !== null ? \"Update Address\" : \"Add Address\"}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-secondary ml-2 mx-2\"\r\n            onClick={toggleAddAddress}\r\n          >\r\n            Cancel\r\n          </button>\r\n        </form>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"text-center font-weight-bold px-2 py-0 rounded\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn bg-danger text-light fs-2 btn-lg rounded\"\r\n            onClick={toggleAddAddress}\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ul className=\"row\">\r\n        {addresses.map((address, index) => (\r\n          <div className=\"col-md-6\" key={index}>\r\n            <div className=\"card mb-3 \">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\">Address {index + 1}</h5>\r\n                <p className=\"card-text text-capitalize\">{address}</p>\r\n                <div className=\"btn-group\" role=\"group\">\r\n                  <button\r\n                    className=\"btn btn-primary mx-3 rounded\"\r\n                    onClick={() => editAddress(index)}\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-warning mx-3 rounded\"\r\n                    onClick={() => deleteAddress(index)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </ul>\r\n      <h2>{renderAddressForm()}</h2>\r\n\r\n      <button className=\"btn btn-primary my-2\" onClick={handleSaveClick}>\r\n        Save\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n","D:\\food_app\\mernapp\\src\\screens\\Restaurant.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Display.js",[],[],"D:\\food_app\\mernapp\\src\\components\\addItem.js",[],[],"D:\\food_app\\mernapp\\src\\screens\\RestaurantDetail.js",[],[],"D:\\food_app\\mernapp\\src\\components\\RestaurantCard.js",[],[],"D:\\food_app\\mernapp\\src\\components\\Error.js",[],[],{"ruleId":"153","replacedBy":"154"},{"ruleId":"153","replacedBy":"155"},{"ruleId":"156","severity":1,"message":"157","line":7,"column":10,"nodeType":"158","messageId":"159","endLine":7,"endColumn":18},"no-new-object",["160"],["160"],"no-unused-vars","'userData' is assigned a value but never used.","Identifier","unusedVar","no-object-constructor"]